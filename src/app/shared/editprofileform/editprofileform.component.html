<ion-header translucent>
  <ion-toolbar>
    <ion-title>{{ title }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="close()">✖</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
<form [formGroup]="form" class="form-container">

  @for (item of formCreate; track item.name) {

    <div class="form-field">

      <!-- TEXT -->
      @if (item.type === 'text') {
        <ion-item lines="none" class="input-item">
          <ion-input
            [type]="item.type"
            [label]="item.label"
            labelPlacement="stacked"
            [formControlName]="item.name">
          </ion-input>
        </ion-item>
      }

      <!-- TEXTAREA -->
      @if (item.type === 'textarea') {
        <ion-item lines="none" class="input-item">
          <ion-textarea
            [label]="item.label"
            labelPlacement="stacked"
            autoGrow="true"
            [formControlName]="item.name">
          </ion-textarea>
        </ion-item>
      }

      <!-- MENSAJES INFORMATIVOS -->
      @if (form.get(item.name)?.touched && item.explicacion) {
        <div class="info-message">
          {{ item.explicacion }}
        </div>
      }

      <!-- ERRORES -->
      @if (form.get(item.name)?.touched && form.get(item.name)?.invalid) {
        <div class="error-message">

          @if (form.get(item.name)?.errors?.['required']) {
            <span>Este campo es obligatorio</span>
          }

          @if (form.get(item.name)?.errors?.['minlength']) {
            <span>Mínimo 8 caracteres</span>
          }

          @if (form.get(item.name)?.errors?.['pattern']) {
            <span>Formato inválido</span>
          }

        </div>
      }

    </div>
  }

  <ion-button expand="block"
              type="submit"
              (click)="enviar()"
              [disabled]="form.invalid"
              class="submit-btn">
    <ion-icon name="save-outline"></ion-icon>
    Guardar Cambios
  </ion-button>

</form>

</ion-content>
